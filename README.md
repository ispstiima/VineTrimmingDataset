# Vine Trimming Dataset
Dataset of images of vines before and after trimming. Captured by a Microsoft Azure Kinect DK in June 2022.

## Dataset description

The dataset is designed to test automatic algorithms for measuring changes in the canopy of grapevine plants using natural, on-field images. To this aim, two segments of rows in a commercial vineyard were monitored with an RGB-D camera ([Microsoft Azure Kinect DK](https://azure.microsoft.com/en-us/products/kinect-dk/)) before and after a trimming practice.

The dataset consists of 36 captures, acquired in the Conte Spagnoletti Zeuli vineyard in Andria, Italy (41° 14' 24" N, 16° 11' 37,998" E), where the Vitis Vinifera, cultivar "Nero di Troia" (red wine grape variety) is grown. 

The data was acquired by a Microsoft Azure Kinect, on a tripod fixed at a variable distance between 1.5 and 2 m to the row, on June 23rd, 2022. 

18 images were captured from the east row and the other 18 from the west row in a time range between 8:29 and 8:43 in the morning (local time). For each row, nine images were captured before trimming and nine others from the same plants but after trimming. The map of the experimental field with the plant tags is in the following figure.

![Experimental field](/MAP.png "Experimental field in Andria, Italy")

The Azure Kinect camera produced the following data:
- Color images (.jpg) of resolution 2048 x 1536 pixels
- Depth maps (.jpg) of resolution 640 x 576 pixels. The jpg image is an 8-bit grayscale image. The depth sample step is equal to 20 mm
- Infrared (IR) images (.jpg) of resolution 640 x 576 pixels
- Color images (.jpg) aligned in the depth geometry
- Depth maps and IR images (.jpg) aligned in the color geometry
- Point clouds (.ply) in the color geometry
- Point clouds (.ply) in the depth geometry

The camera's intrinsic parameters, as generated by the MS Azure Kinect SDK (v1.4.1), are in the *Camera Intrinsics.txt* file. Translations and rotations move the color geometry to the depth one.

Color images were manually annotated with the [LabelMe software](https://github.com/wkentaro/labelme) to create a segmentation ground truth of three classes:

- Canopy: high vegetation other than the trunk
- Grapes: grape bunches
- Background: the remaining pixels

Segments are in colored segmentation masks (ID\*\_GroundTruth\_\*.png) where canopy, grapes and background classes are in green, blue and black, respectively.

The measured mass of the removed leaves equals **283 g** for the east row and **244 g** for the west row (measured 5 hours later, temperature of 29°C - 31°C, humidity of 45.4% - 51.5% and atmospheric pressure of 1012 hPa - 1014 hPa).

## Acquisition software

The acquisitions were performed by *Azure Kinect Picture Taker* software. The software is based on the [Microsoft Azure Kinect Sensor SDK v1.4.1](https://learn.microsoft.com/en-us/azure/kinect-dk/sensor-sdk-download).

The software code is available online at [this link](https://gitlab.com/roberto.marani/azure-kinect-picture-taker/). The Windows 10 or 11 OS release is available [here](https://gitlab.com/roberto.marani/azure-kinect-picture-taker/-/tree/main/Release) (copy and paste the whole folder to make it work).

## Acknowledgments
This paper was funded by the "TEBAKA - TErritorial BAsic Knowledge Acquisition" research project (MUR PON Agrifood Program, Grant No. ARS01\_00815). 

The authors would like to thank the "Conte Spagnoletti Zeuli" farm in Andria (Italy) for hosting the experiments.

## Credits

Annaclaudia Bono, Roberto Marani and Tiziana D'Orazio performed the experiments. Roberto Marani implemented the code for gathering data from the Microsoft Azure Kinect DK.

Contact person: Roberto Marani - [roberto.marani@stiima.cnr.it](mailto:roberto.marani@stiima.cnr.it)

National Research Council of Italy (CNR), Institute of Intelligent Systems and Technologies for Advanced Manufacturing (STIIMA), via Amendola 122 D/O, 70126, Bari, Italy.


## Cite this dataset

A. Bono, R. Marani, C. Guaragnella, T. D’Orazio, "Biomass Characterization with Semantic Segmentation Models and Point Cloud Analysis for Precision Viticulture," *submitted to Computers and Electronics in Agriculture*, 2023.
